<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dao.AdminMapper">
    <insert id="registerAdmin" parameterType="bean.Admin">
        INSERT INTO admins
        (name,passwd,salt,phone,remark,reg_time,last_order,openid)
        VALUES
        (#{name},#{passwd},#{salt},#{phone},#{remark},now(),#{last_order},#{openid})
    </insert>
    <update id="updatePhone">
        UPDATE admin
        SET phone=#{phone}
        WHERE adminid=#{id}
    </update>
    <update id="updatePasswd">
        UPDATE admin
        SET passwd=#{passwd},salt=#{salt}
        WHERE adminid=#{id}
    </update>
    <update id="updateOpenID">
        UPDATE admin
        SET openid=#{openid}
        WHERE adminid=#{id}
    </update>
    <update id="updateRemark">
        UPDATE admin
        SET remark=#{remark}
        WHERE adminid=#{id}
    </update>
    <update id="updateLastOrder">
        UPDATE admin
        SET last_order=#{time}
        WHERE adminid=#{id}
    </update>
    <delete id="deleteAdmin">
        DELETE FROM admin WHERE adminid=#{id}
    </delete>
    <select id="getAdminByID" resultType="bean.Admin">
        SELECT * FROM admins WHERE adminid=#{id}
    </select>
    <select id="getAdminByName" resultType="bean.Admin">
        SELECT * FROM admins WHERE name=#{name}
    </select>
    <select id="getAdminByPhone" resultType="bean.Admin">
        SELECT * FROM admins WHERE phone=#{phone}
    </select>
    <select id="getAdminList" resultType="bean.Admin">
        SELECT * FROM admins
    </select>
</mapper>